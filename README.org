* Overview
Nomad is the OmnyPay schema migration library

* COMMENT Usage

Define migration handlers as follows:

#+BEGIN_SRC clojure
  (require '[nomad.core :as nomad :refer [defmigration]])
  (require '[clojure.java.jdbc :as jdbc])

  (defmigration initial-schema
    :up   (fn []
            (jdbc/do-commands
             "CREATE TABLE test(name VARCHAR(32))")))

  (defmigration add-age-column
    :up   (fn []
            (jdbc/do-commands
             "ALTER TABLE test ADD COLUMN age INTEGER")))

#+END_SRC

Create a =migrator= using one of the supported nomad migrators (currently H2 and Postgres).

#+BEGIN_SRC clojure
  (require '[nomad.migrator.h2 :as h2])

  ;; create a migrator
  (def migrator (h2/connect {:db "mem:test;DB_CLOSE_DELAY=-1;IGNORECASE=TRUE"}))

  ;; apply migrations
  (nomad/migrate! migrator)
  16-08-06 19:11:19 luna INFO [nomad.core:89] - Applying migration init-schema
  16-08-06 19:11:19 luna INFO [nomad.core:89] - Applying migration add-test1-age
#+END_SRC

* References

See [[https://github.com/omnyway-labs/nomad-migrators/tree/master/src/nomad/migrator][nomad-migrators]] for examples of how to create migrators for different databases.
